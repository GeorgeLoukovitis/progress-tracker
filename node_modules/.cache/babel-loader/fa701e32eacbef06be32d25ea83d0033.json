{"ast":null,"code":"import _slicedToArray from\"C:/Users/Programming/Documents/GitHub/progress-tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useState,useEffect}from'react';import{useNavigate}from\"react-router-dom\";import{Avatar,Box,Button,Card,CardContent,CssBaseline,Drawer,List,ListItem,ListItemText,ListSubheader,Stack,Typography}from'@mui/material';import ErrorIcon from'@mui/icons-material/Error';import MyAppBar from'./MyAppBar';import SideMenu from'./SideMenu';import{getToken,getUser,refresh}from'../utilities/LoginService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyAchievements=function MyAchievements(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDrawerOpen=_useState2[0],setDrawer=_useState2[1];var toggleDrawer=function toggleDrawer(){setDrawer(!isDrawerOpen);};var navigate=useNavigate();var _useState3=useState(getUser()),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setLocalUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),achievements=_useState6[0],setAchievements=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];useEffect(function(){refresh(setLocalUser);fetch(\"http://localhost:8000/achievements\",{mode:\"cors\",method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"x-access-token\":getToken(),\"Access-Control-Allow-Origin\":\"*\"}}).then(function(res){if(res.ok){return res.json();}else{throw Error(res.statusText);}}).then(function(data){console.log(\"Achievements\");console.log(data);setAchievements(data);}).catch(function(err){console.log(err.message);setErrorMessage(err.message);});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(MyAppBar,{title:\"My Achievements\",toggleDrawer:toggleDrawer}),/*#__PURE__*/_jsx(Drawer,{anchor:\"left\",open:isDrawerOpen,onClose:toggleDrawer,children:/*#__PURE__*/_jsx(SideMenu,{})}),/*#__PURE__*/_jsx(Box,{sx:{margin:4,display:'flex',flexDirection:'column',alignItems:'center'},children:/*#__PURE__*/_jsx(Card,{sx:{width:500},children:errorMessage?/*#__PURE__*/_jsxs(CardContent,{sx:{display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{m:1,bgcolor:'red'},children:/*#__PURE__*/_jsx(ErrorIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",children:errorMessage})]}):/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(List,{subheader:/*#__PURE__*/_jsx(ListSubheader,{children:\"My Achievements\"}),children:achievements.map(function(achievement){return/*#__PURE__*/_jsx(ListItem,{secondaryAction:/*#__PURE__*/_jsx(Stack,{direction:\"row\",children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){if(achievement.cardanoTx){window.open(\"https://preprod.cexplorer.io/tx/\"+achievement.cardanoTx+\"/metadata#data\",'_blank');}},children:\"Show In Explorer\"})}),children:/*#__PURE__*/_jsx(ListItemText,{primary:achievement.milestoneName,secondary:achievement.data})},achievement._id);})})})})})]});};export default MyAchievements;","map":{"version":3,"sources":["C:/Users/Programming/Documents/GitHub/progress-tracker/src/components/MyAchievements.js"],"names":["React","useState","useEffect","useNavigate","Avatar","Box","Button","Card","CardContent","CssBaseline","Drawer","List","ListItem","ListItemText","ListSubheader","Stack","Typography","ErrorIcon","MyAppBar","SideMenu","getToken","getUser","refresh","MyAchievements","isDrawerOpen","setDrawer","toggleDrawer","navigate","user","setLocalUser","achievements","setAchievements","errorMessage","setErrorMessage","fetch","mode","method","headers","then","res","ok","json","Error","statusText","data","console","log","catch","err","message","margin","display","flexDirection","alignItems","width","m","bgcolor","map","achievement","cardanoTx","window","open","milestoneName","_id"],"mappings":"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","sourcesContent":["import {React, useState, useEffect} from 'react'\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport {Avatar, Box, Button, Card, CardContent, CssBaseline, Drawer, List, ListItem, ListItemText, ListSubheader, Stack, Typography } from '@mui/material';\r\nimport ErrorIcon from '@mui/icons-material/Error';\r\nimport MyAppBar from './MyAppBar'\r\nimport SideMenu from './SideMenu';\r\nimport { getToken, getUser, refresh } from '../utilities/LoginService';\r\n\r\nconst MyAchievements = () => {\r\n\r\n  const [isDrawerOpen, setDrawer] = useState(false);\r\n  const toggleDrawer = ()=>{\r\n    setDrawer(!isDrawerOpen)\r\n  }\r\n  const navigate = useNavigate()\r\n\r\n  const [user, setLocalUser] = useState(getUser())\r\n  const [achievements, setAchievements] = useState([]);\r\n  const [errorMessage, setErrorMessage] = useState(\"\")\r\n\r\n  useEffect(()=>{\r\n    refresh(setLocalUser)\r\n    fetch(\"http://localhost:8000/achievements\",\r\n    {\r\n      mode: \"cors\",\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"x-access-token\": getToken(), \r\n        \"Access-Control-Allow-Origin\": \"*\"\r\n      },\r\n    })\r\n    .then((res)=>{\r\n      if(res.ok)\r\n      {\r\n        return res.json()\r\n      }\r\n      else\r\n      {\r\n        throw Error(res.statusText)\r\n      }\r\n      \r\n    })\r\n    .then((data)=>{\r\n      console.log(\"Achievements\")\r\n      console.log(data)\r\n      setAchievements(data)\r\n    })\r\n    .catch((err)=>{\r\n      console.log(err.message)\r\n      setErrorMessage(err.message)\r\n    })\r\n  },[])\r\n\r\n  return (\r\n    <div>\r\n      <CssBaseline></CssBaseline>\r\n      <MyAppBar title=\"My Achievements\" toggleDrawer={toggleDrawer}></MyAppBar>\r\n      <Drawer\r\n        anchor={\"left\"}\r\n        open={isDrawerOpen}\r\n        onClose={toggleDrawer}\r\n      >\r\n        <SideMenu></SideMenu>\r\n      </Drawer>\r\n      <Box sx={{margin: 4,\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center', \r\n      }}>\r\n        <Card sx={{width:500}}>\r\n          {\r\n            (errorMessage)?\r\n            <CardContent sx={{display: 'flex', flexDirection: 'column',alignItems: 'center'}}>\r\n              <Avatar sx={{ m: 1, bgcolor: 'red' }}>\r\n                <ErrorIcon></ErrorIcon>   \r\n              </Avatar>\r\n              <Typography variant=\"subtitle1\">{errorMessage}</Typography>\r\n            </CardContent>:\r\n            <CardContent>\r\n              <List subheader={\r\n                <ListSubheader>My Achievements</ListSubheader>\r\n              }>\r\n                {\r\n                  achievements.map((achievement)=>(\r\n                    <ListItem key={achievement._id} secondaryAction={(\r\n                      <Stack direction=\"row\">\r\n                        <Button onClick={()=>{\r\n                          if(achievement.cardanoTx)\r\n                          {\r\n                            window.open(\"https://preprod.cexplorer.io/tx/\"+achievement.cardanoTx+\"/metadata#data\", '_blank');\r\n                          }\r\n                        }}>Show In Explorer</Button>\r\n                      </Stack>\r\n                    )}>\r\n                      <ListItemText primary={achievement.milestoneName} secondary={achievement.data}></ListItemText>\r\n                    </ListItem>\r\n                  ))\r\n                }\r\n              </List>\r\n            </CardContent>\r\n          }\r\n          \r\n        </Card>\r\n      </Box>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MyAchievements"]},"metadata":{},"sourceType":"module"}