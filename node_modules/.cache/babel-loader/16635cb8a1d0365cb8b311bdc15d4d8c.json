{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Programming/Documents/GitHub/progress-tracker/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Programming/Documents/GitHub/progress-tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate}from'react-router';import{Box,Button,Card,CardActions,CardContent,Checkbox,CssBaseline,Divider,Drawer,IconButton,List,ListItem,ListItemText,ListSubheader,Stack,TextField,Typography}from\"@mui/material\";import AddIcon from'@mui/icons-material/Add';import RemoveIcon from'@mui/icons-material/Remove';import{getToken,getUser,refresh}from'../utilities/LoginService';import MyAppBar from'./MyAppBar';import SideMenu from'./SideMenu';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SetTitle=function SetTitle(_ref){var setProjectTitle=_ref.setProjectTitle,nextStage=_ref.nextStage;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];return/*#__PURE__*/_jsxs(Card,{sx:{width:500},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Create a new Project\"}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",fullWidth:true,id:\"Project Title\",label:\"Project Title\",name:\"title\",autoComplete:\"Title 1\",value:title,onChange:function onChange(e){setTitle(e.target.value);},autoFocus:true}),errorMessage?/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"red\",children:errorMessage}):/*#__PURE__*/_jsx(_Fragment,{})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){fetch(\"http://localhost:8000/projectExists\",{mode:\"cors\",method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"x-access-token\":getToken(),\"Access-Control-Allow-Origin\":\"*\"},body:JSON.stringify({title:title})}).then(function(res){if(res.ok){return res.text();}}).then(function(data){if(data==\"no\"){setProjectTitle(title);nextStage();}else{setErrorMessage(\"Project name already exists\");}});},children:\"Next\"})})]});};var SetAdmins=function SetAdmins(_ref2){var setProjectAdmins=_ref2.setProjectAdmins,nextStage=_ref2.nextStage,previousStage=_ref2.previousStage,creator=_ref2.creator;var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),searchTerm=_useState6[0],setSearchTerm=_useState6[1];var _useState7=useState([creator]),_useState8=_slicedToArray(_useState7,2),admins=_useState8[0],setAdmins=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),suggestions=_useState10[0],setSuggestions=_useState10[1];useEffect(function(){fetch(\"http://localhost:8000/users\",{mode:\"cors\",method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"x-access-token\":getToken(),\"Access-Control-Allow-Origin\":\"*\"}}).then(function(res){return res.json();}).then(function(data){console.log(\"Users\");console.log(data);data=data.filter(function(s){return s._id!==creator._id;});setSuggestions(data);});},[creator]);return/*#__PURE__*/_jsxs(Card,{sx:{width:500},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Select project administrators\"}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",fullWidth:true,id:\"Search Bar\",label:\"Search\",name:\"search-bar\",value:searchTerm,onChange:function onChange(e){setSearchTerm(e.target.value);},autoFocus:true}),/*#__PURE__*/_jsx(List,{children:suggestions.filter(function(val){return val.username.includes(searchTerm);}).map(function(val){return/*#__PURE__*/_jsx(ListItem,{secondaryAction:/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){setAdmins([].concat(_toConsumableArray(admins),[val]));setSuggestions(suggestions.filter(function(suggestion){return suggestion._id!==val._id;}));},children:/*#__PURE__*/_jsx(AddIcon,{color:\"success\"})}),children:/*#__PURE__*/_jsx(ListItemText,{primary:val.username,secondary:\"#\"+val._id})},val._id);})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(List,{children:admins.map(function(val){return/*#__PURE__*/_jsx(ListItem,{secondaryAction:/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){setSuggestions([].concat(_toConsumableArray(suggestions),[val]));setAdmins(admins.filter(function(admin){return admin._id!==val._id;}));},children:/*#__PURE__*/_jsx(RemoveIcon,{sx:{color:\"red\"}})}),children:/*#__PURE__*/_jsx(ListItemText,{primary:val.username,secondary:\"#\"+val._id})},val._id);})})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){previousStage();},children:\"Back\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){setProjectAdmins(admins);nextStage();},children:\"Next\"})]})]});};var MilestoneForm=function MilestoneForm(_ref3){var otherMilestones=_ref3.otherMilestones,setToggle=_ref3.setToggle,setMilestones=_ref3.setMilestones,otherRequiredMilestones=_ref3.otherRequiredMilestones,setRequiredMilestones=_ref3.setRequiredMilestones;var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),milestoneName=_useState12[0],setMilestoneName=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),milestoneRequired=_useState14[0],setMilestoneRequired=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),milestonePrerequisites=_useState16[0],setMilestonePrerequisites=_useState16[1];var saveMilestone=function saveMilestone(){var tempMilestone={name:milestoneName,prerequisites:milestonePrerequisites};fetch(\"http://localhost:8000/milestones/\",{mode:\"cors\",method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Access-Control-Allow-Origin\":\"*\",\"x-access-token\":getToken()},body:JSON.stringify(tempMilestone)}).then(function(res){if(res.ok)return res.json();else throw Error(\"Refresh Error\");}).then(function(data){console.log(\"Milestone\");console.log(data);setMilestones([].concat(_toConsumableArray(otherMilestones),[data]));if(milestoneRequired){setRequiredMilestones([].concat(_toConsumableArray(otherRequiredMilestones),[data]));}}).catch(function(err){console.log(err.message);});return true;};return/*#__PURE__*/_jsxs(Card,{sx:{width:500},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"New Milestone\"}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"name\",label:\"Milestone Name\",name:\"name\",autoFocus:true,value:milestoneName,onChange:function onChange(e){setMilestoneName(e.target.value);}}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:milestoneRequired?\"contained\":\"outlined\",onClick:function onClick(){setMilestoneRequired(!milestoneRequired);},children:\"Required\"}),/*#__PURE__*/_jsx(List,{subheader:/*#__PURE__*/_jsx(ListSubheader,{component:\"div\",children:\"Prerequisites\"}),children:otherMilestones.map(function(val){return/*#__PURE__*/_jsx(ListItem,{secondaryAction:/*#__PURE__*/_jsx(Checkbox,{value:milestonePrerequisites.includes(val._id),onChange:function onChange(){if(milestonePrerequisites.includes(val._id)){setMilestonePrerequisites(milestonePrerequisites.filter(function(prerequisite){return prerequisite!==val._id;}));}else{setMilestonePrerequisites([].concat(_toConsumableArray(milestonePrerequisites),[val._id]));}}}),children:/*#__PURE__*/_jsx(ListItemText,{primary:val.name,secondary:otherRequiredMilestones.includes(val)?\"Required\":\"Optional\"})},val._id);})})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){setToggle(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{disabled:otherMilestones.map(function(m){return m.name;}).includes(milestoneName),fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){if(saveMilestone())setToggle(false);},children:\"Save\"})]})]});};var SetMilestones=function SetMilestones(_ref4){var setProjectMilestones=_ref4.setProjectMilestones,setProjectRequiredMilestones=_ref4.setProjectRequiredMilestones,nextStage=_ref4.nextStage,previousStage=_ref4.previousStage;var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),milestones=_useState18[0],setMilestones=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),requiredMilestones=_useState20[0],setRequiredMilestone=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),toggle=_useState22[0],setToggle=_useState22[1];return!toggle?/*#__PURE__*/_jsxs(Card,{sx:{width:500},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Create Milestones for the Project\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"outlined\",sx:{mt:2},onClick:function onClick(){return setToggle(true);},children:\" Add Milestone\"}),/*#__PURE__*/_jsx(List,{children:milestones.map(function(val){return/*#__PURE__*/_jsx(ListItem,{secondaryAction:/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){setMilestones(milestones.filter(function(milestone){return milestone.name!==val.name;}));},children:/*#__PURE__*/_jsx(RemoveIcon,{sx:{color:\"red\"}})}),children:/*#__PURE__*/_jsx(ListItemText,{primary:val.name+\" #\"+val._id,secondary:requiredMilestones.includes(val)?\"Required\":\"Optional\"})},val.name);})})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){previousStage();},children:\"Previous\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){setProjectMilestones(milestones);setProjectRequiredMilestones(requiredMilestones);nextStage();},children:\"Next\"})]})]}):/*#__PURE__*/_jsx(MilestoneForm,{otherMilestones:milestones,setToggle:setToggle,setMilestones:setMilestones,otherRequiredMilestones:requiredMilestones,setRequiredMilestones:setRequiredMilestone});};var Preview=function Preview(_ref5){var title=_ref5.title,admins=_ref5.admins,milestones=_ref5.milestones,requiredMilestones=_ref5.requiredMilestones,previousStage=_ref5.previousStage,creator=_ref5.creator;var navigate=useNavigate();var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),errorMessage=_useState24[0],setErrorMessage=_useState24[1];return/*#__PURE__*/_jsxs(Card,{sx:{width:500},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:title}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",justifyContent:\"space-evenly\",children:[/*#__PURE__*/_jsx(List,{subheader:/*#__PURE__*/_jsx(ListSubheader,{component:\"div\",children:\"Admins\"}),children:admins.map(function(val){return/*#__PURE__*/_jsx(ListItem,{divider:true,children:/*#__PURE__*/_jsx(ListItemText,{primary:val.username,secondary:\"#\"+val._id})},val._id);})}),/*#__PURE__*/_jsx(List,{subheader:/*#__PURE__*/_jsx(ListSubheader,{component:\"div\",children:\"Milestones\"}),children:milestones.map(function(val){return/*#__PURE__*/_jsx(ListItem,{divider:true,children:/*#__PURE__*/_jsx(ListItemText,{primary:val.name,secondary:requiredMilestones.includes(val)?\"Required\":\"Optional\"})},val._id);})})]}),errorMessage?/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:errorMessage}):/*#__PURE__*/_jsx(_Fragment,{})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){previousStage();},children:\"Previous\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){var project={title:title,admins:admins.map(function(a){return a._id;}),milestones:milestones.map(function(m){return m._id;}),requiredMilestones:requiredMilestones.map(function(m){return m._id;})};console.log(project);fetch(\"http://localhost:8000/projects\",{mode:\"cors\",method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"x-access-token\":getToken(),\"Access-Control-Allow-Origin\":\"*\"},body:JSON.stringify(project)}).then(function(res){if(res.ok)return res.json();else throw Error(res.statusText);}).then(function(data){console.log(\"Created Project\");console.log(data);navigate(\"/\");}).catch(function(err){console.log(err.message);setErrorMessage(err.message);});},children:\"Next\"})]})]});};var NewProjectForm=function NewProjectForm(){var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),isDrawerOpen=_useState26[0],setDrawer=_useState26[1];var toggleDrawer=function toggleDrawer(){setDrawer(!isDrawerOpen);};var _useState27=useState(getUser()),_useState28=_slicedToArray(_useState27,2),user=_useState28[0],setLocalUser=_useState28[1];var _useState29=useState(0),_useState30=_slicedToArray(_useState29,2),stage=_useState30[0],setStage=_useState30[1];var nextStage=function nextStage(){setStage(stage+1);};var previousStage=function previousStage(){setStage(stage-1);};useEffect(function(){refresh(setLocalUser);},[]);var showForm=function showForm(s){if(s===0)return/*#__PURE__*/_jsx(SetTitle,{setProjectTitle:setProjectTitle,nextStage:nextStage});else if(s===1)return/*#__PURE__*/_jsx(SetAdmins,{setProjectAdmins:setProjectAdmins,nextStage:nextStage,previousStage:previousStage,creator:user});else if(s===2)return/*#__PURE__*/_jsx(SetMilestones,{setProjectMilestones:setProjectMilestones,setProjectRequiredMilestones:setProjectRequiredMilestones,nextStage:nextStage,previousStage:previousStage});else if(s===3)return/*#__PURE__*/_jsx(Preview,{title:projectTitle,admins:projectAdmins,milestones:projectMilestones,requiredMilestones:projectRequiredMilestones,previousStage:previousStage,creator:user});};var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),projectTitle=_useState32[0],setProjectTitle=_useState32[1];var _useState33=useState([]),_useState34=_slicedToArray(_useState33,2),projectAdmins=_useState34[0],setProjectAdmins=_useState34[1];var _useState35=useState([]),_useState36=_slicedToArray(_useState35,2),projectMilestones=_useState36[0],setProjectMilestones=_useState36[1];var _useState37=useState([]),_useState38=_slicedToArray(_useState37,2),projectRequiredMilestones=_useState38[0],setProjectRequiredMilestones=_useState38[1];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(MyAppBar,{title:\"New Project\",logoutFun:function logoutFun(){},toggleDrawer:toggleDrawer}),/*#__PURE__*/_jsx(Drawer,{anchor:\"left\",open:isDrawerOpen,onClose:toggleDrawer,children:/*#__PURE__*/_jsx(SideMenu,{})}),/*#__PURE__*/_jsx(Box,{sx:{margin:4,display:'flex',flexDirection:'column',alignItems:'center'},children:showForm(stage)})]});};export default NewProjectForm;","map":{"version":3,"sources":["C:/Users/Programming/Documents/GitHub/progress-tracker/src/components/NewProjectForm.js"],"names":["React","useEffect","useState","useNavigate","Box","Button","Card","CardActions","CardContent","Checkbox","CssBaseline","Divider","Drawer","IconButton","List","ListItem","ListItemText","ListSubheader","Stack","TextField","Typography","AddIcon","RemoveIcon","getToken","getUser","refresh","MyAppBar","SideMenu","SetTitle","setProjectTitle","nextStage","title","setTitle","errorMessage","setErrorMessage","width","e","target","value","mb","fetch","mode","method","headers","body","JSON","stringify","then","res","ok","text","data","SetAdmins","setProjectAdmins","previousStage","creator","searchTerm","setSearchTerm","admins","setAdmins","suggestions","setSuggestions","json","console","log","filter","s","_id","val","username","includes","map","suggestion","admin","color","MilestoneForm","otherMilestones","setToggle","setMilestones","otherRequiredMilestones","setRequiredMilestones","milestoneName","setMilestoneName","milestoneRequired","setMilestoneRequired","milestonePrerequisites","setMilestonePrerequisites","saveMilestone","tempMilestone","name","prerequisites","Error","catch","err","message","prerequisite","m","SetMilestones","setProjectMilestones","setProjectRequiredMilestones","milestones","requiredMilestones","setRequiredMilestone","toggle","mt","milestone","Preview","navigate","project","a","statusText","NewProjectForm","isDrawerOpen","setDrawer","toggleDrawer","user","setLocalUser","stage","setStage","showForm","projectTitle","projectAdmins","projectMilestones","projectRequiredMilestones","margin","display","flexDirection","alignItems"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport { useNavigate } from 'react-router';\nimport {Box, Button, Card, CardActions, CardContent, Checkbox, CssBaseline, Divider, Drawer, IconButton, List, ListItem, ListItemText,ListSubheader, Stack, TextField, Typography} from \"@mui/material\"\nimport AddIcon from '@mui/icons-material/Add';\nimport RemoveIcon from '@mui/icons-material/Remove';\nimport { getToken, getUser, refresh } from '../utilities/LoginService';\nimport MyAppBar from './MyAppBar';\nimport SideMenu from './SideMenu';\n\nconst SetTitle = ({setProjectTitle, nextStage}) => {\n\n  const [title, setTitle] = useState(\"\")\n  const [errorMessage, setErrorMessage] = useState(\"\")\n\n  return (\n    <Card sx={{width:500}}>\n      <CardContent>\n        <Typography component=\"h1\" variant=\"h5\">\n          Create a new Project\n        </Typography>\n        <TextField\n          margin=\"normal\"\n          fullWidth\n          id=\"Project Title\"\n          label=\"Project Title\"\n          name=\"title\"\n          autoComplete=\"Title 1\"\n          value = {title}\n          onChange={(e)=>{setTitle(e.target.value)}}\n          autoFocus\n        />\n        {\n          (errorMessage)?\n          <Typography variant='subtitle2' color=\"red\">{errorMessage}</Typography>:\n          <></>\n        }\n      </CardContent>\n      <CardActions>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            fetch(\"http://localhost:8000/projectExists\",{\n              mode: \"cors\",\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                \"x-access-token\": getToken(), \n                \"Access-Control-Allow-Origin\": \"*\"\n              },\n              body: JSON.stringify({title})\n            })\n            .then((res)=>{\n              if(res.ok)\n              {\n                return res.text()\n              }\n            })\n            .then((data)=>{\n              if(data == \"no\")\n              {\n                setProjectTitle(title)\n                nextStage()\n              }\n              else\n              {\n                setErrorMessage(\"Project name already exists\")\n              }\n            })\n          }}\n        >\n          Next\n        </Button>\n      </CardActions>\n      \n    </Card>\n  )\n}\n\nconst SetAdmins = ({setProjectAdmins, nextStage, previousStage, creator}) => {\n\n  const [searchTerm, setSearchTerm] = useState(\"\")\n  const [admins, setAdmins] = useState([creator,])\n  const [suggestions, setSuggestions] = useState([])\n\n  useEffect(()=>{\n    fetch(\"http://localhost:8000/users\",\n    {\n      mode: \"cors\",\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-access-token\": getToken(), \n        \"Access-Control-Allow-Origin\": \"*\"\n      },\n    })\n    .then((res)=>res.json())\n    .then((data)=>{\n      console.log(\"Users\")\n      console.log(data)\n      data = data.filter(s=>s._id!==creator._id)\n      setSuggestions(data)\n    })\n  }, [creator,])\n\n  return (\n    <Card sx={{width:500}}>\n      <CardContent>\n        <Typography component=\"h1\" variant=\"h5\">\n          Select project administrators\n        </Typography>\n        <TextField\n          margin=\"normal\"\n          fullWidth\n          id=\"Search Bar\"\n          label=\"Search\"\n          name=\"search-bar\"\n          value = {searchTerm}\n          onChange={(e)=>{setSearchTerm(e.target.value)}}\n          autoFocus\n        />\n        <List>\n          {suggestions.filter((val)=>(val.username.includes(searchTerm))).map((val=>(\n            <ListItem key={val._id} secondaryAction={\n              <IconButton onClick={()=>{\n                setAdmins([...admins, val])\n                setSuggestions(suggestions.filter((suggestion)=>(suggestion._id !== val._id)))\n              }}>\n                <AddIcon color='success'></AddIcon>\n              </IconButton>\n            }>\n              <ListItemText primary={val.username} secondary={\"#\"+val._id}></ListItemText>\n            </ListItem>\n          )))}\n        </List>\n        <Divider></Divider>\n        <List>\n          {admins.map((val=>(\n            <ListItem key={val._id} secondaryAction={\n              <IconButton onClick={()=>{\n                setSuggestions([...suggestions, val])\n                setAdmins(admins.filter((admin)=>(admin._id !== val._id)))\n              }}>\n                <RemoveIcon sx={{color:\"red\"}}></RemoveIcon>\n              </IconButton>\n            }>\n              <ListItemText primary={val.username} secondary={\"#\"+val._id}></ListItemText>\n            </ListItem>\n          )))}\n        </List>\n      </CardContent>\n      <CardActions>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            previousStage()\n          }}\n        >\n          Back\n        </Button>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            setProjectAdmins(admins)\n            nextStage()\n          }}\n        >\n          Next\n        </Button>\n      </CardActions>\n      \n    </Card>\n  )\n}\n\n\nconst MilestoneForm = ({otherMilestones, setToggle, setMilestones, otherRequiredMilestones, setRequiredMilestones}) => {\n\n  const [milestoneName, setMilestoneName] = useState(\"\")\n  const [milestoneRequired, setMilestoneRequired] = useState(false)\n  const [milestonePrerequisites, setMilestonePrerequisites] = useState([])\n\n  const saveMilestone = ()=>{\n    const tempMilestone = {\n      name: milestoneName,\n      prerequisites: milestonePrerequisites\n    }\n    fetch(\"http://localhost:8000/milestones/\",{\n      mode: \"cors\",\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"x-access-token\": getToken(),\n      },\n      body: JSON.stringify(tempMilestone)\n    })\n    .then((res)=>{\n      if(res.ok)\n        return res.json()\n      else\n        throw Error(\"Refresh Error\")\n    })\n    .then((data)=>{\n      console.log(\"Milestone\")\n      console.log(data)\n      setMilestones([...otherMilestones, data])\n      if(milestoneRequired)\n      {\n        setRequiredMilestones([...otherRequiredMilestones, data])\n      }\n    })\n    .catch((err)=>{\n      console.log(err.message)\n    })\n    return true\n  }\n\n  return (\n    <Card sx={{width:500}}>\n      <CardContent>\n        <Typography component=\"h1\" variant=\"h5\">\n          New Milestone\n        </Typography>\n        <TextField\n          margin=\"normal\"\n          required\n          fullWidth\n          id=\"name\"\n          label=\"Milestone Name\"\n          name=\"name\"\n          autoFocus\n          value={milestoneName}\n          onChange={(e)=>{setMilestoneName(e.target.value)}}\n        />\n        <Button\n          fullWidth\n          variant={(milestoneRequired)?\"contained\":\"outlined\"}\n          onClick={()=>{\n            setMilestoneRequired(!milestoneRequired)\n          }}\n        >\n          Required\n        </Button>\n        <List subheader={\n          <ListSubheader component=\"div\">\n            Prerequisites\n          </ListSubheader>\n        }>\n          {otherMilestones.map((val=>(\n            <ListItem key={val._id} secondaryAction={\n              <Checkbox value={milestonePrerequisites.includes(val._id)} onChange={()=>{\n                  if(milestonePrerequisites.includes(val._id))\n                  {\n                    setMilestonePrerequisites(milestonePrerequisites.filter((prerequisite)=>(prerequisite !== val._id)))\n                  }\n                  else\n                  {\n                    setMilestonePrerequisites([...milestonePrerequisites, val._id])\n                  }\n                }\n              }></Checkbox>\n            }>\n              <ListItemText primary={val.name} secondary={(otherRequiredMilestones.includes(val))?\"Required\":\"Optional\"} ></ListItemText>\n            </ListItem>\n          )))}\n        </List>\n      </CardContent>\n      <CardActions>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            setToggle(false)\n          }}\n        >\n          Cancel\n        </Button>\n        <Button\n          disabled = {otherMilestones.map(m=>m.name).includes(milestoneName)}\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            if(saveMilestone())\n              setToggle(false)\n          }}\n        >\n          Save\n        </Button>\n      </CardActions>\n      \n    </Card>\n  )\n}\n\n\n\nconst SetMilestones = ({setProjectMilestones, setProjectRequiredMilestones, nextStage, previousStage}) => {\n  const [milestones, setMilestones] = useState([])\n  const [requiredMilestones, setRequiredMilestone] = useState([])\n  const [toggle, setToggle] = useState(false)\n  return (\n    (!toggle)?\n    <Card sx={{width:500}}>\n      <CardContent>\n        <Typography component=\"h1\" variant=\"h5\">\n          Create Milestones for the Project\n        </Typography>\n        <Button fullWidth variant='outlined' sx={{mt:2}} onClick={()=>setToggle(true)}> Add Milestone</Button>\n        <List>\n          {milestones.map((val=>(\n            <ListItem key={val.name} secondaryAction={\n              <IconButton onClick={()=>{\n                setMilestones(milestones.filter((milestone)=>(milestone.name !== val.name)))\n              }}>\n                <RemoveIcon sx={{color:\"red\"}}></RemoveIcon>\n              </IconButton>\n            }>\n              <ListItemText primary={val.name + \" #\" + val._id} secondary={(requiredMilestones.includes(val))?\"Required\":\"Optional\"}></ListItemText>\n            </ListItem>\n          )))}\n        </List>\n      </CardContent>\n      <CardActions>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            previousStage()\n          }}\n        >\n          Previous\n        </Button>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            setProjectMilestones(milestones)\n            setProjectRequiredMilestones(requiredMilestones)\n            nextStage()\n          }}\n        >\n          Next\n        </Button>\n      </CardActions>\n      \n    </Card>:\n    <MilestoneForm otherMilestones={milestones} setToggle={setToggle} setMilestones={setMilestones} otherRequiredMilestones={requiredMilestones} setRequiredMilestones={setRequiredMilestone}></MilestoneForm>\n  )\n}\n\nconst Preview = ({title, admins, milestones, requiredMilestones, previousStage, creator}) => {\n\n  const navigate = useNavigate();\n  const [errorMessage, setErrorMessage] = useState(\"\")\n\n  return (\n    <Card sx={{width:500}}>\n      <CardContent>\n        <Typography component=\"h1\" variant=\"h5\">\n          {title}\n        </Typography>\n        <Stack direction=\"row\" justifyContent=\"space-evenly\">\n          <List subheader={\n            <ListSubheader component=\"div\">\n              Admins\n            </ListSubheader>\n          }>\n            {admins.map((val=>(\n              <ListItem key={val._id} divider={true}>\n                <ListItemText primary={val.username} secondary={\"#\"+val._id}></ListItemText>\n              </ListItem>\n            )))}\n          </List>\n          <List subheader={\n            <ListSubheader component=\"div\">\n              Milestones\n            </ListSubheader>\n          }>\n            {milestones.map((val=>(\n              <ListItem key={val._id} divider={true}>\n                <ListItemText primary={val.name} secondary={(requiredMilestones.includes(val))?\"Required\":\"Optional\"}></ListItemText>\n              </ListItem>\n            )))}\n          </List>\n        </Stack>\n        {\n          (errorMessage)?\n          <Typography variant='subtitle2'>{errorMessage}</Typography>:\n          <></>\n        }\n      </CardContent>\n      <CardActions>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            previousStage()\n          }}\n        >\n          Previous\n        </Button>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            const project = {\n              title, \n              admins: admins.map((a)=>(a._id)), \n              milestones : milestones.map((m)=>(m._id)),\n              requiredMilestones: requiredMilestones.map((m)=>(m._id))\n            }\n            console.log(project)\n            fetch(\"http://localhost:8000/projects\",\n            {\n              mode: \"cors\",\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                \"x-access-token\": getToken(), \n                \"Access-Control-Allow-Origin\": \"*\"\n              },\n              body: JSON.stringify(project)\n            })\n            .then((res)=>{\n              if(res.ok)\n                return res.json()\n              else\n                throw Error(res.statusText)\n            })\n            .then((data)=>{\n              console.log(\"Created Project\")\n              console.log(data)\n              navigate(\"/\")\n            })\n            .catch((err)=>{\n              console.log(err.message)\n              setErrorMessage(err.message)\n            })\n\n          }}\n        >\n          Next\n        </Button>\n      </CardActions>\n      \n    </Card>\n  )\n}\n\n\n\n\n\nconst NewProjectForm = () => {\n\n  const [isDrawerOpen, setDrawer] = useState(false);\n  const toggleDrawer = ()=>{\n    setDrawer(!isDrawerOpen)\n  }\n\n  const [user, setLocalUser] = useState(getUser())\n  const [stage, setStage] = useState(0);\n  const nextStage = ()=>{\n    setStage(stage+1);\n  }\n  const previousStage = ()=>{\n    setStage(stage-1);\n  }\n\n  useEffect(()=>{\n    refresh(setLocalUser)\n  },[])\n\n  const showForm = (s)=>{\n    if(s === 0)\n      return (<SetTitle setProjectTitle = {setProjectTitle} nextStage = {nextStage}></SetTitle>)\n    else if (s === 1)\n      return (<SetAdmins setProjectAdmins={setProjectAdmins} nextStage = {nextStage} previousStage = {previousStage} creator = {user}></SetAdmins>)\n    else if (s === 2)\n      return (<SetMilestones setProjectMilestones={setProjectMilestones} setProjectRequiredMilestones={setProjectRequiredMilestones} nextStage = {nextStage} previousStage = {previousStage}></SetMilestones>)\n    else if (s === 3)\n      return (<Preview title={projectTitle} admins = {projectAdmins} milestones = {projectMilestones} requiredMilestones = {projectRequiredMilestones} previousStage = {previousStage} creator={user}></Preview>)\n  }\n\n  const [projectTitle, setProjectTitle] = useState(\"\")\n  const [projectAdmins, setProjectAdmins] = useState([])\n  const [projectMilestones, setProjectMilestones] = useState([])\n  const [projectRequiredMilestones, setProjectRequiredMilestones] = useState([])\n\n  return (\n    <div>\n      <CssBaseline></CssBaseline>\n      <MyAppBar title=\"New Project\" logoutFun={()=>{}} toggleDrawer={toggleDrawer}></MyAppBar>\n      <Drawer\n          anchor={\"left\"}\n          open={isDrawerOpen}\n          onClose={toggleDrawer}\n        >\n          <SideMenu></SideMenu>\n      </Drawer>\n      <Box sx={{margin: 4,\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center', \n              }}>\n        {showForm(stage)}\n      </Box>\n    </div>\n  )\n}\n\nexport default NewProjectForm"]},"metadata":{},"sourceType":"module"}