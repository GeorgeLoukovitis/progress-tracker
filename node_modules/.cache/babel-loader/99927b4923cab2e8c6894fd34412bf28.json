{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Programming/Documents/GitHub/progress-tracker/Frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Programming/Documents/GitHub/progress-tracker/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate,useParams}from'react-router-dom';import{Avatar,Box,Button,Card,CardActions,CardContent,Checkbox,CssBaseline,Drawer,List,ListItem,ListItemButton,ListItemText,TextField,Typography}from'@mui/material';import DoneIcon from'@mui/icons-material/Done';import ErrorIcon from'@mui/icons-material/Error';import MyAppBar from'./MyAppBar';import{getToken}from'../utilities/LoginService';import{isMilestoneAchieved}from\"../utilities/ProjectService\";import SideMenu from'./SideMenu';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SelectMilestone=function SelectMilestone(_ref){var previousStage=_ref.previousStage,nextStage=_ref.nextStage,setMilestoneToAward=_ref.setMilestoneToAward,projectId=_ref.projectId,userToAward=_ref.userToAward;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),project=_useState2[0],setProject=_useState2[1];useEffect(function(){fetch(\"http://localhost:8000/projects/\"+projectId,{mode:\"cors\",method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"x-access-token\":getToken(),\"Access-Control-Allow-Origin\":\"*\"}}).then(function(res){if(res.ok){return res.json();}}).then(function(data){console.log(\"Project\");// console.log(data)\nsetProject(data);});},[projectId]);var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),milestone=_useState4[0],setMilestone=_useState4[1];return/*#__PURE__*/_jsxs(Card,{sx:{width:500},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Select Milestone To Award\"}),project?/*#__PURE__*/_jsx(List,{children:project.milestones.filter(function(m){return!isMilestoneAchieved(userToAward,m);}).map(function(val){return/*#__PURE__*/_jsx(ListItem,{secondaryAction:/*#__PURE__*/_jsx(Checkbox,{checked:milestone===val}),children:/*#__PURE__*/_jsx(ListItemButton,{onClick:function onClick(){setMilestone(val);},children:/*#__PURE__*/_jsx(ListItemText,{primary:val.name,secondary:project.requiredMilestones.includes(val._id)?\"Required\":\"Optional\"})})},val._id);})}):/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){previousStage();},children:\"Previous\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,disabled:!milestone,variant:\"contained\",sx:{mb:2},onClick:function onClick(){setMilestoneToAward(milestone);nextStage();},children:\"Next\"})]})]});};var SelectUser=function SelectUser(_ref2){var nextStage=_ref2.nextStage,setUserToAward=_ref2.setUserToAward;var _useParams=useParams(),projectId=_useParams.projectId;var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),users=_useState6[0],setUsers=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];useEffect(function(){fetch(\"http://localhost:8000/enrolledUsers/\"+projectId,{mode:\"cors\",method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"x-access-token\":getToken(),\"Access-Control-Allow-Origin\":\"*\"}}).then(function(res){if(res.ok)return res.json();else throw Error(res.statusText);}).then(function(data){setUsers(data);}).catch(function(err){console.log(err.message);setErrorMessage(err.message);});},[projectId]);var navigate=useNavigate();var _useState9=useState({_id:0}),_useState10=_slicedToArray(_useState9,2),selectedUser=_useState10[0],setSelectedUser=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),searchTerm=_useState12[0],setSearchTerm=_useState12[1];return/*#__PURE__*/_jsxs(Card,{sx:{width:500},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Select Users To Award\"}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",fullWidth:true,id:\"Search Bar\",label:\"Search\",name:\"search-bar\",value:searchTerm,onChange:function onChange(e){setSearchTerm(e.target.value);},autoFocus:true}),errorMessage?errorMessage:/*#__PURE__*/_jsx(List,{children:users.filter(function(u){return u.username.includes(searchTerm);}).map(function(val){return/*#__PURE__*/_jsx(ListItem,{secondaryAction:/*#__PURE__*/_jsx(Checkbox,{checked:selectedUser._id===val._id}),children:/*#__PURE__*/_jsx(ListItemButton,{onClick:function onClick(){if(selectedUser._id===val._id){console.log(\"Remove\");setSelectedUser(null);}else{console.log(\"Add\");setSelectedUser(val);}},children:/*#__PURE__*/_jsx(ListItemText,{primary:val.username,secondary:\"#\"+val._id})})},val._id);})})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){navigate(\"/manage-projects\");},children:\"Previous\"}),/*#__PURE__*/_jsx(Button,{disabled:selectedUser._id==0,fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){setUserToAward(selectedUser);nextStage();},children:\"Next\"})]})]});};var SelectSupport=function SelectSupport(_ref3){var previousStage=_ref3.previousStage,nextStage=_ref3.nextStage,setAwardSupport=_ref3.setAwardSupport,userToAward=_ref3.userToAward;var _useParams2=useParams(),projectId=_useParams2.projectId;var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),milestones=_useState14[0],setMilestones=_useState14[1];useEffect(function(){fetch(\"http://localhost:8000/projects/\"+projectId,{mode:\"cors\",method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"x-access-token\":getToken(),\"Access-Control-Allow-Origin\":\"*\"}}).then(function(res){if(res.ok){return res.json();}else{throw Error();}}).then(function(data){console.log(\"Project\");console.log(data);setMilestones(data.milestones);});},[projectId]);var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),support=_useState16[0],setSupport=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),searchTerm=_useState18[0],setSearchTerm=_useState18[1];return/*#__PURE__*/_jsxs(Card,{sx:{width:500},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Why is the User Awarded\"}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",fullWidth:true,id:\"Search Bar\",label:\"Search\",name:\"search-bar\",value:searchTerm,onChange:function onChange(e){setSearchTerm(e.target.value);},autoFocus:true}),/*#__PURE__*/_jsx(List,{children:milestones.filter(function(m){return m.name.includes(searchTerm)&&isMilestoneAchieved(userToAward,m);}).map(function(val){return/*#__PURE__*/_jsx(ListItem,{secondaryAction:/*#__PURE__*/_jsx(Checkbox,{checked:support.includes(val._id)}),children:/*#__PURE__*/_jsx(ListItemButton,{onClick:function onClick(){if(support.includes(val._id)){console.log(\"Remove\");setSupport(support.filter(function(m){return m!==val._id;}));}else{console.log(\"Add\");setSupport([].concat(_toConsumableArray(support),[val._id]));}},children:/*#__PURE__*/_jsx(ListItemText,{primary:val.name,secondary:\"#\"+val._id})})},val._id);})})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){previousStage();},children:\"Previous\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){setAwardSupport(support);nextStage();},children:\"Next\"})]})]});};var SetData=function SetData(_ref4){var setAwardData=_ref4.setAwardData,previousStage=_ref4.previousStage,nextStage=_ref4.nextStage;var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),data=_useState20[0],setData=_useState20[1];return/*#__PURE__*/_jsxs(Card,{sx:{width:500},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Enter achievement comments\"}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",fullWidth:true,id:\"Comments\",label:\"Comments (optional)\",name:\"comments\",autoComplete:\"\",value:data,onChange:function onChange(e){setData(e.target.value);},autoFocus:true})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){previousStage();},children:\"Previous\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){setAwardData(data);nextStage();},children:\"Next\"})]})]});};var SuccessScreen=function SuccessScreen(_ref5){var errorMessage=_ref5.errorMessage;var navigate=useNavigate();console.log('Error:',errorMessage);return/*#__PURE__*/_jsxs(Card,{sx:{width:500},children:[errorMessage?/*#__PURE__*/_jsxs(CardContent,{sx:{display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Awarding Error\"}),/*#__PURE__*/_jsx(Avatar,{sx:{m:1,bgcolor:'red'},children:/*#__PURE__*/_jsx(ErrorIcon,{})}),/*#__PURE__*/_jsxs(Typography,{component:\"h3\",variant:\"h5\",children:[\" \",errorMessage,\" \"]})]}):/*#__PURE__*/_jsxs(CardContent,{sx:{display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Milestoned Awarded\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Avatar,{sx:{m:1,bgcolor:'green'},children:/*#__PURE__*/_jsx(DoneIcon,{})})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){navigate(\"/\");},children:\"Done\"})})]});};var AwardMilestones=function AwardMilestones(){var _useParams3=useParams(),projectId=_useParams3.projectId;var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isDrawerOpen=_useState22[0],setDrawer=_useState22[1];var toggleDrawer=function toggleDrawer(){setDrawer(!isDrawerOpen);};var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),stage=_useState24[0],setStage=_useState24[1];var nextStage=function nextStage(){setStage(stage+1);};var previousStage=function previousStage(){setStage(stage-1);};var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),errorMessage=_useState26[0],setErrorMessage=_useState26[1];var navigate=useNavigate();var awardUser=function awardUser(){console.log(\"Award\");console.log(milestoneToAward);console.log(userToAward);fetch(\"http://localhost:8000/awardMilestone/\",{mode:\"cors\",method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"x-access-token\":getToken(),\"Access-Control-Allow-Origin\":\"*\"},body:JSON.stringify({milestoneId:milestoneToAward._id,userId:userToAward._id,data:awardData,support:awardSupport})}).then(function(res){if(res.ok){return res.json();}else{throw Error(res.statusText);}}).then(function(data){console.log(data);}).catch(function(err){// console.log(err.message)\nsetErrorMessage(err.message);console.log(\"Error: \",errorMessage);});};var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),userToAward=_useState28[0],setUserToAward=_useState28[1];var _useState29=useState(null),_useState30=_slicedToArray(_useState29,2),milestoneToAward=_useState30[0],setMilestoneToAward=_useState30[1];var _useState31=useState([]),_useState32=_slicedToArray(_useState31,2),awardSupport=_useState32[0],setAwardSupport=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),awardData=_useState34[0],setAwardData=_useState34[1];var showForm=function showForm(s,previousStage,nextStage,setMilestoneToAward){if(s===0)return/*#__PURE__*/_jsx(SelectUser,{nextStage:nextStage,setUserToAward:setUserToAward});else if(s===1)return/*#__PURE__*/_jsx(SelectMilestone,{previousStage:previousStage,nextStage:nextStage,setMilestoneToAward:setMilestoneToAward,projectId:projectId,userToAward:userToAward});else if(s===2)return/*#__PURE__*/_jsx(SelectSupport,{previousStage:previousStage,nextStage:nextStage,setAwardSupport:setAwardSupport,userToAward:userToAward});else if(s===3)return/*#__PURE__*/_jsx(SetData,{previousStage:previousStage,nextStage:nextStage,setAwardData:setAwardData});else if(s===4){awardUser();return/*#__PURE__*/_jsxs(Card,{sx:{width:500},children:[errorMessage?/*#__PURE__*/_jsxs(CardContent,{sx:{display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Awarding Error\"}),/*#__PURE__*/_jsx(Avatar,{sx:{m:1,bgcolor:'red'},children:/*#__PURE__*/_jsx(ErrorIcon,{})}),/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[\" \",errorMessage,\" \"]})]}):/*#__PURE__*/_jsxs(CardContent,{sx:{display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Milestoned Awarded\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Avatar,{sx:{m:1,bgcolor:'green'},children:/*#__PURE__*/_jsx(DoneIcon,{})})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",sx:{mb:2},onClick:function onClick(){navigate(\"/\");},children:\"Done\"})})]});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(MyAppBar,{title:\"Award Milestone\",logoutFun:function logoutFun(){},toggleDrawer:toggleDrawer}),/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(Drawer,{anchor:\"left\",open:isDrawerOpen,onClose:toggleDrawer,children:/*#__PURE__*/_jsx(SideMenu,{})}),/*#__PURE__*/_jsx(Box,{sx:{margin:4,display:'flex',flexDirection:'column',alignItems:'center'},children:showForm(stage,previousStage,nextStage,setMilestoneToAward)})]});};export default AwardMilestones;","map":{"version":3,"sources":["C:/Users/Programming/Documents/GitHub/progress-tracker/Frontend/src/components/AwardMilestones.js"],"names":["React","useEffect","useState","useNavigate","useParams","Avatar","Box","Button","Card","CardActions","CardContent","Checkbox","CssBaseline","Drawer","List","ListItem","ListItemButton","ListItemText","TextField","Typography","DoneIcon","ErrorIcon","MyAppBar","getToken","isMilestoneAchieved","SideMenu","SelectMilestone","previousStage","nextStage","setMilestoneToAward","projectId","userToAward","project","setProject","fetch","mode","method","headers","then","res","ok","json","data","console","log","milestone","setMilestone","width","milestones","filter","m","map","val","name","requiredMilestones","includes","_id","mb","SelectUser","setUserToAward","users","setUsers","errorMessage","setErrorMessage","Error","statusText","catch","err","message","navigate","selectedUser","setSelectedUser","searchTerm","setSearchTerm","e","target","value","u","username","SelectSupport","setAwardSupport","setMilestones","support","setSupport","SetData","setAwardData","setData","SuccessScreen","display","flexDirection","alignItems","bgcolor","AwardMilestones","isDrawerOpen","setDrawer","toggleDrawer","stage","setStage","awardUser","milestoneToAward","body","JSON","stringify","milestoneId","userId","awardData","awardSupport","showForm","s","margin"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport { Avatar, Box, Button, Card, CardActions, CardContent, Checkbox, CssBaseline, Drawer, List, ListItem, ListItemButton, ListItemText, TextField, Typography } from '@mui/material'\nimport DoneIcon from '@mui/icons-material/Done';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport MyAppBar from './MyAppBar';\nimport { getToken } from '../utilities/LoginService';\nimport {isMilestoneAchieved} from \"../utilities/ProjectService\"\nimport SideMenu from './SideMenu';\n\n\nconst SelectMilestone = ({previousStage, nextStage, setMilestoneToAward, projectId, userToAward}) => {\n\n  const [project, setProject] = useState(null)\n  useEffect(()=>{\n    fetch(\"http://localhost:8000/projects/\"+projectId,\n    {\n      mode: \"cors\",\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-access-token\": getToken(), \n        \"Access-Control-Allow-Origin\": \"*\"\n      },\n    })\n    .then((res)=>{\n      if(res.ok)\n      {\n        return res.json()\n      }\n    })\n    .then((data)=>{\n      console.log(\"Project\")\n      // console.log(data)\n      setProject(data)\n    })\n  },[projectId,])\n  \n  const [milestone, setMilestone] = useState(\"\")\n\n  return (\n    <Card sx={{width:500}}>\n      <CardContent>\n        <Typography component=\"h1\" variant=\"h5\">\n          Select Milestone To Award\n        </Typography>\n        {(project)?\n        <List>\n          {project.milestones.filter((m)=>(!isMilestoneAchieved(userToAward, m))).map((val=>(\n            <ListItem key={val._id} secondaryAction={\n              <Checkbox checked={milestone===val}></Checkbox>\n            }>\n              <ListItemButton onClick={()=>{setMilestone(val)}}>\n                <ListItemText primary={val.name} secondary={(project.requiredMilestones.includes(val._id))?\"Required\":\"Optional\"}></ListItemText>\n              </ListItemButton>\n            </ListItem>\n          )))}\n        </List>:\n        <div></div>}\n      </CardContent>\n      <CardActions>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            previousStage()\n          }}\n        >\n          Previous\n        </Button>\n        <Button\n          fullWidth\n          disabled = {!milestone}\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            setMilestoneToAward(milestone)\n            nextStage()\n          }}\n        >\n          Next\n        </Button>\n      </CardActions>\n      \n    </Card>\n  )\n}\n\nconst SelectUser = ({nextStage, setUserToAward})=> {\n  const {projectId} = useParams()\n  const [users, setUsers] = useState([])\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(()=>{\n    fetch(\"http://localhost:8000/enrolledUsers/\"+projectId,\n    {\n      mode: \"cors\",\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-access-token\": getToken(), \n        \"Access-Control-Allow-Origin\": \"*\"\n      },\n    })\n      .then((res)=>{\n        if(res.ok)\n          return res.json()\n        else\n          throw Error(res.statusText)\n      })\n      .then((data)=>{\n        setUsers(data)\n      })\n      .catch((err)=>{\n        console.log(err.message)\n        setErrorMessage(err.message)\n      })\n  },[projectId,])\n  \n  const navigate = useNavigate()\n  const [selectedUser, setSelectedUser] = useState({_id:0}) \n  const [searchTerm, setSearchTerm] = useState(\"\")\n\n  return (\n    <Card sx={{width:500}}>\n      <CardContent>\n        <Typography component=\"h1\" variant=\"h5\">\n          Select Users To Award\n        </Typography>\n        <TextField\n          margin=\"normal\"\n          fullWidth\n          id=\"Search Bar\"\n          label=\"Search\"\n          name=\"search-bar\"\n          value = {searchTerm}\n          onChange={(e)=>{setSearchTerm(e.target.value)}}\n          autoFocus\n        />\n        {\n          (errorMessage)?\n          errorMessage:\n          <List>\n            {users.filter((u)=>(u.username.includes(searchTerm))).map((val=>(\n              <ListItem key={val._id} secondaryAction={\n                <Checkbox checked={selectedUser._id === val._id}></Checkbox>\n              }>\n                <ListItemButton onClick={()=>{\n                  if(selectedUser._id === val._id)\n                  {\n                    console.log(\"Remove\")\n                    setSelectedUser(null)\n                  }\n                  else\n                  {\n                    console.log(\"Add\")\n                    setSelectedUser(val)\n                  }\n                }}>\n                  <ListItemText primary={val.username} secondary={\"#\"+val._id}></ListItemText>\n                </ListItemButton>\n              </ListItem>\n            )))}\n          </List>\n        }\n        \n      </CardContent>\n      <CardActions>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            navigate(\"/manage-projects\")\n          }}\n        >\n          Previous\n        </Button>\n        <Button\n          disabled = {selectedUser._id == 0}\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            setUserToAward(selectedUser)\n            nextStage()\n          }}\n        >\n          Next\n        </Button>\n      </CardActions>\n      \n    </Card>\n  )\n}\n\nconst SelectSupport = ({previousStage, nextStage, setAwardSupport, userToAward}) => {\n\n  const {projectId} = useParams();\n  const [milestones, setMilestones] = useState([])\n\n  useEffect(()=>{\n    fetch(\"http://localhost:8000/projects/\"+projectId,{\n      mode: \"cors\",\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-access-token\": getToken(), \n        \"Access-Control-Allow-Origin\": \"*\"\n      },\n    })\n    .then((res)=>{\n      if(res.ok)\n      {\n        return res.json()\n      }\n      else{\n        throw Error()\n      }\n    })\n    .then((data)=>{\n      console.log(\"Project\")\n      console.log(data)\n      setMilestones(data.milestones)\n    })\n  }, [projectId,])\n\n  const [support, setSupport] = useState([]) \n  const [searchTerm, setSearchTerm] = useState(\"\")\n\n  return (\n    <Card sx={{width:500}}>\n      <CardContent>\n        <Typography component=\"h1\" variant=\"h5\">\n          Why is the User Awarded\n        </Typography>\n        <TextField\n          margin=\"normal\"\n          fullWidth\n          id=\"Search Bar\"\n          label=\"Search\"\n          name=\"search-bar\"\n          value = {searchTerm}\n          onChange={(e)=>{setSearchTerm(e.target.value)}}\n          autoFocus\n        />\n        <List>\n          {milestones.filter((m)=>(m.name.includes(searchTerm) && isMilestoneAchieved(userToAward, m))).map((val=>(\n            <ListItem key={val._id} secondaryAction={\n              <Checkbox checked={support.includes(val._id)}></Checkbox>\n            }>\n              <ListItemButton onClick={()=>{\n                if(support.includes(val._id))\n                {\n                  console.log(\"Remove\")\n                  setSupport(support.filter(m=>(m!==val._id)))\n                }\n                else\n                {\n                  console.log(\"Add\")\n                  setSupport([...support, val._id])\n                }\n              }}>\n                <ListItemText primary={val.name} secondary={\"#\"+val._id}></ListItemText>\n              </ListItemButton>\n            </ListItem>\n          )))}\n        </List>\n      </CardContent>\n      <CardActions>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            previousStage()\n          }}\n        >\n          Previous\n        </Button>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            setAwardSupport(support)\n            nextStage()\n          }}\n        >\n          Next\n        </Button>\n      </CardActions>\n      \n    </Card>\n  )\n}\n\nconst SetData = ({setAwardData, previousStage, nextStage}) => {\n\n  const [data, setData] = useState(\"\")\n\n  return (\n    <Card sx={{width:500}}>\n      <CardContent>\n        <Typography component=\"h1\" variant=\"h5\">\n          Enter achievement comments\n        </Typography>\n        <TextField\n          margin=\"normal\"\n          fullWidth\n          id=\"Comments\"\n          label=\"Comments (optional)\"\n          name=\"comments\"\n          autoComplete=\"\"\n          value = {data}\n          onChange={(e)=>{setData(e.target.value)}}\n          autoFocus\n        />\n      </CardContent>\n      <CardActions>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            previousStage()\n          }}\n        >\n          Previous\n        </Button>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            setAwardData(data)\n            nextStage()\n          }}\n        >\n          Next\n        </Button>\n      </CardActions>\n      \n    </Card>\n  )\n}\n\nconst SuccessScreen = ({errorMessage}) => {\n\n  const navigate = useNavigate()\n  console.log('Error:', errorMessage);\n  \n  return (\n    <Card sx={{width:500}}> \n      {\n        (errorMessage)?\n        <CardContent sx={{display: 'flex', flexDirection: 'column',alignItems: 'center'}}>\n          <Typography component=\"h1\" variant=\"h5\">\n            Awarding Error\n          </Typography>\n          <Avatar sx={{ m: 1, bgcolor: 'red' }}>\n            <ErrorIcon></ErrorIcon>   \n          </Avatar>\n          <Typography component=\"h3\" variant=\"h5\"> {errorMessage} </Typography>\n          \n        </CardContent>:\n        <CardContent sx={{display: 'flex', flexDirection: 'column',alignItems: 'center'}} >\n          <Typography component=\"h1\" variant=\"h5\">\n            Milestoned Awarded\n          </Typography>\n          <br></br>\n          <Avatar sx={{ m: 1, bgcolor: 'green' }}>\n            <DoneIcon></DoneIcon>   \n          </Avatar>\n        </CardContent>\n\n      }\n      <CardActions>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          sx={{ mb: 2 }}\n          onClick={()=>{\n            navigate(\"/\")\n          }}\n        >\n          Done\n        </Button>\n      </CardActions>\n      \n    </Card>\n  )\n}\n\nconst AwardMilestones = () => {\n\n  const {projectId} = useParams()\n\n  const [isDrawerOpen, setDrawer] = useState(false);\n  const toggleDrawer = ()=>{\n    setDrawer(!isDrawerOpen)\n  }\n\n  const [stage, setStage] = useState(0);\n  const nextStage = ()=>{\n    setStage(stage+1);\n  }\n  const previousStage = ()=>{\n    setStage(stage-1);\n  }\n\n  const [errorMessage, setErrorMessage] = useState(\"\")\n  const navigate = useNavigate()\n\n  const awardUser = () => {\n    console.log(\"Award\")\n    console.log(milestoneToAward)\n    console.log(userToAward)\n    fetch(\"http://localhost:8000/awardMilestone/\",\n    {\n      mode: \"cors\",\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-access-token\": getToken(), \n        \"Access-Control-Allow-Origin\": \"*\"\n      },\n      body: JSON.stringify({milestoneId:milestoneToAward._id, userId: userToAward._id, data: awardData, support: awardSupport})\n    })\n    .then((res)=>{\n      if(res.ok)\n      {\n        return res.json()\n      }\n      else\n      {\n        throw Error(res.statusText)\n      }\n    })\n    .then((data)=>{console.log(data)})\n    .catch((err)=>{\n      // console.log(err.message)\n      setErrorMessage(err.message)\n      console.log(\"Error: \", errorMessage)\n      \n    })\n  }\n\n  const [userToAward, setUserToAward] = useState(null)\n  const [milestoneToAward, setMilestoneToAward] = useState(null)\n  const [awardSupport, setAwardSupport] = useState([])\n  const [awardData, setAwardData] = useState(\"\")\n  \n  const showForm = (s,previousStage, nextStage, setMilestoneToAward)=>{\n    if(s === 0)\n      return (<SelectUser nextStage={nextStage} setUserToAward={setUserToAward}></SelectUser>)\n    else if(s === 1)\n      return (<SelectMilestone previousStage={previousStage} nextStage={nextStage} setMilestoneToAward={setMilestoneToAward} projectId={projectId} userToAward={userToAward}></SelectMilestone>)\n    else if(s ===2)\n      return (<SelectSupport previousStage={previousStage} nextStage={nextStage} setAwardSupport={setAwardSupport} userToAward={userToAward}></SelectSupport>)\n    else if(s ===3)\n      return (<SetData previousStage={previousStage} nextStage={nextStage} setAwardData={setAwardData}></SetData>)\n    else if(s === 4)\n    {\n      awardUser()\n      return (\n        <Card sx={{width:500}}> \n          {\n            (errorMessage)?\n            <CardContent sx={{display: 'flex', flexDirection: 'column',alignItems: 'center'}}>\n              <Typography component=\"h1\" variant=\"h5\">\n                Awarding Error\n              </Typography>\n              <Avatar sx={{ m: 1, bgcolor: 'red' }}>\n                <ErrorIcon></ErrorIcon>   \n              </Avatar>\n              <Typography variant=\"subtitle1\"> {errorMessage} </Typography>\n              \n            </CardContent>:\n            <CardContent sx={{display: 'flex', flexDirection: 'column',alignItems: 'center'}} >\n              <Typography component=\"h1\" variant=\"h5\">\n                Milestoned Awarded\n              </Typography>\n              <br></br>\n              <Avatar sx={{ m: 1, bgcolor: 'green' }}>\n                <DoneIcon></DoneIcon>   \n              </Avatar>\n            </CardContent>\n    \n          }\n          <CardActions>\n            <Button\n              fullWidth\n              variant=\"contained\"\n              sx={{ mb: 2 }}\n              onClick={()=>{\n                navigate(\"/\")\n              }}\n            >\n              Done\n            </Button>\n          </CardActions>\n          \n        </Card>\n      )\n    }\n  }\n\n  return (\n    <div>\n      <MyAppBar title=\"Award Milestone\" logoutFun={()=>{}} toggleDrawer={toggleDrawer}></MyAppBar>\n      <CssBaseline></CssBaseline>\n      <Drawer\n          anchor={\"left\"}\n          open={isDrawerOpen}\n          onClose={toggleDrawer}\n        >\n          <SideMenu></SideMenu>\n      </Drawer>\n      <Box sx={{margin: 4,\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center', \n              }}>\n        {showForm(stage, previousStage, nextStage, setMilestoneToAward)}\n      </Box>\n    </div>\n  )\n}\n\nexport default AwardMilestones"]},"metadata":{},"sourceType":"module"}